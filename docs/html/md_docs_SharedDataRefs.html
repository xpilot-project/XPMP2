<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>XPMP2: Shared dataRefs providing Textual Aircraft / Flight Information</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XPMP2
   </div>
   <div id="projectbrief">X-Plane multiplayer library 2 - using instancing</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Shared dataRefs providing Textual Aircraft / Flight Information </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Textual aircraft and flight information is provided via <a href="https://developer.x-plane.com/sdk/XPLMDataAccess/#XPLMShareData">shared dataRefs</a> of type <code>xplmType_Data</code> as suggested by FSTramp. This information is offered to 3rd party plugins, which want to show (information of) AI planes like camera or map plugins.</p>
<p><a href="https://developer.x-plane.com/tools/datarefeditor/">DRE</a> and <a href="https://forums.x-plane.org/index.php?/forums/topic/82960-datareftool-is-an-improved-datarefeditor-open-source-better-search-change-detection/">DRT</a> are informed about these dataRef names as soon as the first aircraft is created. So you can use either to have a peek.</p>
<h1><a class="anchor" id="autotoc_md36"></a>
Information offered by XPMP2-based Plugin</h1>
<p>The names of the shared dataRefs follow the naming conventions known from pre-XP11.50 times when there were just 19 multiplayer planes support with similarly named dataRefs for position and configuration information. For each plane there is a set of dataRefs, each dataRef contains up to 40 byte data to be interpreted as a zero-terminated C string.</p>
<p><a class="el" href="namespaceXPMP2.html" title="Defined by FMOD.">XPMP2</a> creates and maintains up to 63 sets of these dataRefs, starting at <code>sim/multiplayer/position/plane1_tailnum</code> and ending at <code>sim/multiplayer/position/plane63_apt_to</code>.</p>
<p>If you want to pubish information in your XPMP2-based plugin via these channels, then fill the appropriate field in the <code><a class="el" href="classXPMP2_1_1Aircraft.html#a8f5bfa2ee408382168b2ccef6aafb20c" title="Informational texts passed on via multiplayer shared dataRefs.">XPMP2::Aircraft::acInfoTexts</a></code> structure.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><code>sim/multiplayer/position/...</code>   </th><th class="markdownTableHeadNone"><code>acInfoTexts.</code>   </th><th class="markdownTableHeadNone">Meaning    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>plane#_tailnum</code>   </td><td class="markdownTableBodyNone"><code>tailNum</code>   </td><td class="markdownTableBodyNone">Tail number, registration    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>plane#_ICAO</code>   </td><td class="markdownTableBodyNone"><code>icaoAcType</code>   </td><td class="markdownTableBodyNone">ICAO Aircraft type    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>plane#_manufacturer</code>   </td><td class="markdownTableBodyNone"><code>manufacturer</code>   </td><td class="markdownTableBodyNone">Aircraft manufacturer, human readable    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>plane#_model</code>   </td><td class="markdownTableBodyNone"><code>model</code>   </td><td class="markdownTableBodyNone">Aircraft model, human readable    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>plane#_ICAOairline</code>   </td><td class="markdownTableBodyNone"><code>icaoAirline</code>   </td><td class="markdownTableBodyNone">ICAO airline/operator code    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>plane#_airline</code>   </td><td class="markdownTableBodyNone"><code>airline</code>   </td><td class="markdownTableBodyNone">Airline/operator    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>plane#_flightnum</code>   </td><td class="markdownTableBodyNone"><code>flightNum</code>   </td><td class="markdownTableBodyNone">Flight number    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>plane#_apt_from</code>   </td><td class="markdownTableBodyNone"><code>aptFrom</code>   </td><td class="markdownTableBodyNone">Origin airport    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>plane#_apt_to</code>   </td><td class="markdownTableBodyNone"><code>aptTo</code>   </td><td class="markdownTableBodyNone">Destination airport    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>plane#_cslModel</code>   </td><td class="markdownTableBodyNone">n/a   </td><td class="markdownTableBodyNone">CSL Model name *)   </td></tr>
</table>
<p>*) <code>_cslModel</code> differs from the others in that it is <em>not</em> related to live flight information but to the way the plane is rendered by the XPMP2-based plugin. It returns the CSL model used as returned by <code><a class="el" href="classXPMP2_1_1Aircraft.html#a949dfd46424c25be22d8a7822baf12ba" title="return the name of the CSL model in use">XPMP2::Aircraft::GetModelName()</a></code>, that is: last folder name plus model id.</p>
<h1><a class="anchor" id="autotoc_md37"></a>
Usage by 3rd-Party Plugins</h1>
<p>A plugin that wants to use this data</p>
<ul>
<li>must <em>once</em> fetch references to all the up to <code>63 * 9 = 567</code> datarefs by<ul>
<li>calling <a href="https://developer.x-plane.com/sdk/XPLMDataAccess/#XPLMShareData"><code>XPLMShareData</code></a>,</li>
<li><em>optionally</em> thereby registering a notification callback, and</li>
<li>calling <a href="https://developer.x-plane.com/sdk/XPLMDataAccess/#XPLMFindDataRef"><code>XPLMFindDataRef</code></a>;</li>
</ul>
</li>
<li>can then query current information via <a href="https://developer.x-plane.com/sdk/XPLMDataAccess/#XPLMGetDatab"><code>XPLMGetDatab</code></a> as usual. Provide at least a 40 character buffer to be on the safe side.</li>
</ul>
<h1><a class="anchor" id="autotoc_md38"></a>
Additional links</h1>
<ul>
<li><a href="https://forums.x-plane.org/index.php?/search/&amp;q=FSTrampFree&amp;type=downloads_file&amp;search_and_or=and&amp;search_in=titles&amp;sortby=relevancy">Download page for "FSTrampFree"</a> where the above shared dataRefs were originally suggested for implementation</li>
<li><a href="https://github.com/TwinFan/LiveTraffic/issues/144">LiveTraffic issue #144</a>, with which the functionality was originally added into the previous TwinFan branch of "libxplanemp" </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
